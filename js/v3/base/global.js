!function(){var e={IS_DEBUG:!0,PAGE_SIZE:10,PAGE:1,HOST_API:location.protocol+"//"+location.host+"/",HOST_IMAGE:location.protocol+"//"+location.host+"/",SHARE_HOST:location.protocol+"//"+location.host,DEF_IMG_URL:"../images/common/default.png",RATIO_OF_ADSPIC:75/106,RATIO_OF_MAINPIC:375/410,RATIO_OF_DETAILPIC:1.6,RATIO_OF_MAINCOVER:640/137,ACTIVITY_BANNER:1.875,SMS_DURATION:120,LOCALHOSTS:["127.0.0.1",""],SHARE_HOSTS:[location.protocol+"//"+location.host],BAIDU_ID:"",VERSION:"1.0.0"};if(e.IS_DEBUG){for(var t=0,n=e.LOCALHOSTS.length;t<n;t++)if(e.LOCALHOSTS[t]==location.hostname){e.HOST_API="http://staging.m.fruitday.com/";break}e.BAIDU_ID=""}window.config=e}(),function(){function e(e){this.options=e||{},this.timeout=15e3,this.cache=!0,this.defaultListTmpl="fruitday-list-tmpl",this.defaultListEle="#fruitday-list",this.defaultDetailTmpl="fruitday-detail-tmpl",this.defaultDetailEle="#fruitday-detail",this.isLoading=!1,this.hasNext=!0,this.queue={},this.tempPage={},this.onEnd=function(){}}function t(e,t,o,i){if($("#"+t).length>0&&o){"undefined"!=typeof o.length&&(o={list:o});var r=n(t,o);i?$(e).append(r):$(e).html(r)}}function n(e,t){return template.render(e,t)}function o(e,t,n){log("["+e+"] "+t+":"+n,2)}function i(e){var t=!0;for(var n in e){t=!1;break}return t}function r(e,t){var n,o=[];for(var i in e)o.push(e[i]),t==i&&(n=e[i]);return 0==o.length?e[t]=1:n?n:(o=o.sort(),e[t]=o[o.length-1]+1)}function a(e,t){if(e){var n={current_page:e.current,per_page:e.size,total:e.count};n.current_page=parseInt(n.current_page),n.total=parseInt(n.total),n.per_page=parseInt(n.per_page),n.total=Math.ceil(n.total/n.per_page),n.prev_page=1==n.current_page?1:n.current_page-1,n.next_page=n.current_page==n.total?n.current_page:n.current_page+1;var o=n.current_page-2,i=n.current_page+2;n.total<=5?(o=1,i=n.total):(o<1&&(o=1,i=o+4),i>n.total&&(i=n.total,o=n.total-4));var r="";r+="<dl><dt"+(1==n.prev_page?' class="disabled"':"")+'><a href="#'+n.prev_page+'"><img src="images/arrow_left.gif"></a></dt><dd>';for(var a=o;a<=i;a++)r+='<a href="#'+a+'"'+(n.current_page==a?' class="active"':"")+">"+a+"</a>";r+='</dd><dt class="ari'+(n.next_page>=n.total?" disabled":"")+'"><a href="#'+n.next_page+'"><img src="images/arrow_left.gif"></a></dt></dl>',$(t).html(r).show()}}function s(e,t){e=e||{};for(var n in t)e[n]="undefined"==typeof e[n]?t[n]:e[n]}function l(e){return!!e&&"object"==typeof e&&void 0!=typeof e.length}var c='<div class="nodata">暂无数据。</div>',u='<div class="nodata">没有更多数据。</div>',p='<div class="nodata">服务器异常。</div>',d='<div class="nodata">数据错误。</div>',f=$("#fruitday-loading");e.prototype._init=function(){this.spinnings;return this},e.prototype.paging=function(e,t,n){var o=this,i=1==e.data.page,l={renderFor:this.defaultListTmpl,renderEle:this.defaultListEle,pagingDom:".pagination",pagingMode:"next",timeKey:"createAt",key:"data",showLoading:!0,logtype:"paging"};if(s(e,l),"number"==e.pagingMode)$(e.renderEle).html("正在加载中..."),$(e.pagingDom).hide();else if("next"==e.pagingMode){var f=r(o.tempPage,e.url);f=1;var g=$("#np-"+f),h='<div id="np-'+f+'" class="nextpage">正在加载中...</div>';0==g.length&&($(e.renderEle).after(h),g=$("#np-"+f)),g.html("正在加载中...").addClass("disabled"),i&&($(e.renderEle).html(""),$(e.emptyEle).hide())}o.ajaxSend(e,function(n,r,s){var l=n[e.key];return"-1"==e.key&&(l=n),o.isSusPagingData(l)?("number"==e.pagingMode?(l&&0!=l.length?o.render(e.renderEle,e.renderFor,l):i&&$(e.renderEle).html(c),a(n.pageInfo,e.pagingDom)):"next"==e.pagingMode&&(0==l.length?i?(g.hide(),$(e.emptyEle).length>0?$(e.emptyEle).show():$(e.renderEle).html(c)):g.html(u):(o.hasNext=l.length==e.data.pageSize,g.show(),o.render(e.renderEle,e.renderFor,l,!i),o.hasNext?g.html("正在加载更多").removeClass("disabled"):g.html(u))),void("function"==typeof t&&t(n))):($(e.renderEle).html(d),void g.hide())},function(t,o){$(e.renderEle).html(p),g.hide(),"function"==typeof n&&n(t,o)})},e.prototype.detail=function(e,n,o){var i=this,r={renderFor:this.defaultDetailTmpl,renderEle:this.defaultDetailEle,key:"body",showLoading:!0,logtype:"detail"};s(e,r),e.showLoading&&$(e.renderEle).html('<div class="loading">加载中...</div>'),i.ajaxSend(e,function(o,i,r){if(log("ajaxSend end "+(new Date).getTime()),o.error)return void $(e.renderEle).html(o.error);var a=o[e.key]||{};a&&t(e.renderEle,e.renderFor,a),"function"==typeof n&&n(o)},o)},e.prototype.submit=function(e,t,n){var o,i,r=this,a=!!e.data.length,l={type:"POST",showLoading:!0,logtype:"submit"};s(e,l),a?(o=e.data.serializeArray(),i=e.data.find('[type="submit"]'),i.attr("disabled",!0)):o=e.data,e.data=o,r.ajaxSend(e,function(e,n,o){a&&i.removeAttr("disabled"),"function"==typeof t&&t(e)},function(e,t,o){a&&i.removeAttr("disabled"),"function"==typeof n&&n(e,t,o)})},e.prototype.custom=function(e,t,n){var o=this,i={logtype:"custom"};s(e,i),o.ajaxSend(e,t,n)},e.prototype.ajaxSend=function(e,t,n){var r=this;r.isLoading=!0,r.queue[e.url]=!0,e.showLoading&&f.show(),e=e||{};var a=Storage.get("USERTOKEN");a&&(header.UserToken=a),void 0==typeof e.contentType&&(e.contentType="application/json"),void 0==typeof e.processData&&(e.processData=!0),$.ajax({url:e.url,data:e.data,type:e.type||"GET",dataType:"json",timeout:r.timeout,cache:r.cache,contentType:e.contentType,processData:e.processData,username:"",password:"",success:function(a,s,l){return Tools.alert("success data:"+JSON.stringify(a).substring(0,300)),r.isLoading=!1,delete r.queue[e.url],a&&200==a.code?("function"==typeof t&&t(a),void(i(r.queue)&&"function"==typeof r.onEnd&&r.onEnd.call(this))):(o(e.logtype,a.msg||a,e.url),a.code==-30?void common.login():void("function"==typeof n&&n("Malformed",a)))},error:function(t,a,s){Tools.alert("error data: "+JSON.stringify(t.response)),r.isLoading=!1,delete r.queue[e.url],o(e.logtype,a,e.url),"function"==typeof n&&n(a,{}),i(r.queue)&&"function"==typeof r.onEnd&&r.onEnd.call(this)},complete:function(t,n){setTimeout(function(){f.hide()},100),$(e.renderEle).show()}})},e.prototype.render=t,e.prototype.logged=o,e.prototype.isSusPagingData=l,window.Ajax=new e}(),function(){var e={get:function(e){var t="(?:;)?"+e+"=([^;]*);?",n=new RegExp(t);if(!n.test(document.cookie))return null;try{return unescape(RegExp.$1)}catch(o){return null}},_set:function(e,t,n,o,i,r){var a=null;a="number"==typeof n&&"number"==typeof o&&"number"==typeof i&&"number"==typeof r?0==n&&0==o&&0==i&&0==r?null:this.getExpDate(n,o,i,r):n||this.getExpDate(7,0,0,0),document.cookie=e+"="+escape(t)+(null==a?"":";expires="+a)+"; path=/"},set:function(e,t,n){this._set(e,t,n,0,0,0)},remove:function(e){this.set(e,"",-1)},getExpDate:function(e,t,n,o){var i=new Date;if("number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof o)return i.setDate(i.getDate()+parseInt(e)),i.setHours(i.getHours()+parseInt(t)),i.setMinutes(i.getMinutes()+parseInt(n)),i.setSeconds(i.getSeconds()+parseInt(o)),i.toGMTString()}};window.Cookie=e}(),function(){var e={sep:":",loadURL:function(e,t){var n,o=e+this.sep+t;return n=document.createElement("iframe"),n.setAttribute("src",o),n.setAttribute("style","display:none;"),n.setAttribute("height","0px"),n.setAttribute("width","0px"),n.setAttribute("frameborder","0"),document.body.appendChild(n),n.parentNode.removeChild(n),n=null,o}};e.noticeIsLogout=function(){return this.loadURL("logout","1")},e.toOrder=function(e){return this.loadURL("order",e)},e.toPay=function(e){return this.loadURL("pay",e)},e.toCategory=function(e){return this.loadURL("category",e||1)},e.toHome=function(e){return this.loadURL("home",e||1)},e.toGroup=function(e){return this.loadURL("group",e||1)},e.toShare=function(){var e="{}";return this.shareData&&(e=JSON.stringify(this.shareData)),this.loadURL("share",e)},e.getShareData=function(){return this.shareData},e.setHeader=function(e){var t={};try{t=JSON.parse(e),Storage.set("AppHeader",t)}catch(n){}return t},e.cancelPay=function(){$(".btn-pay").text("立即支付").removeClass("disabled")},e.init=function(e,t){e&&Cookie.set("UserSN",e),t&&Cookie.set("RBYAIRID",t),Cookie.set("IsBind",1)},e.noticeCart=function(e){this.loadURL("cart",e)},e.toGoods=function(e){return this.loadURL("goods",e)},e.toBack=function(){return this.loadURL("back",1)},window.Jiao=e}();var log=function(e){"undefined"!=typeof console&&console.log(e)};!function(e){var t=0,n=function(e){var t=this;if("object"==typeof e)for(var n in e)t[n]=e[n];else"string"==typeof e&&(t.targetPage=$(e));t.coverDom=t.coverDom||$("#sidebar-bg"),t.coverDom.click(function(e){e.preventDefault(),t.closeSidebar()})};n.prototype={targetPage:void 0,coverDom:void 0,beforeOpen:function(){},afterClose:function(){},openSidebar:function(n){var o=$(e),i=o.width(),r=(o.height(),this.targetPage.height(),this);r.coverDom.show(),r.targetPage.show().css({width:i}),setTimeout(function(){r.targetPage.addClass("open")},100),t++,$("body").hasClass("move")||$("body").addClass("move").css({width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,overflow:"hidden"}),n&&n(),r.beforeOpen&&r.beforeOpen()},closeSidebar:function(e){var n=this;this.targetPage.removeClass("open"),t--,setTimeout(function(){n.coverDom.hide(),n.targetPage.hide(),hasOpend=!1,t<=0&&$("body").removeClass("move").css({width:"auto",height:"auto",overflow:"inherit"}),e&&e(),n.afterClose&&n.afterClose()},220)}},e.SecondPage=n}(window),function(){var e={AUTH:"FLV-AUTH",ACCOUNT:"FLV-ACCOUNT",REMEMBER:"FLV-REMEMBER",LOGIN_HISTORY:"LH",AREA:"FLV-AREA",get:function(e,t){if(this.isLocalStorage()){var n=this.getStorage(t).getItem(e);return n&&"undefined"!=n?JSON.parse(n):void 0}},set:function(e,t,n){this.isLocalStorage()&&(t=JSON.stringify(t),this.getStorage(n).setItem(e,t))},remove:function(e,t){this.isLocalStorage()&&this.getStorage(t).removeItem(e)},getStorage:function(e){return e?sessionStorage:localStorage},isLocalStorage:function(){try{return window.localStorage?(localStorage.setItem("FORTEST",1),!0):(log("不支持本地存储"),!1)}catch(e){return log("本地存储已关闭"),!1}}};window.Storage=e}(),function(){String.prototype.isSpaces=function(){for(var e=0;e<this.length;e+=1){var t=this.charAt(e);if(" "!=t&&"\n"!=t&&"\t"!=t&&"\r"!=t)return!1}return!0},String.prototype.isValidMail=function(){return new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this)},String.prototype.isPhone=function(){return new RegExp(/^1\d{10}?$/).test(this)},String.prototype.isEmpty=function(){return/^\s*$/.test(this)},String.prototype.isValidPwd=function(){return new RegExp(/^([_]|[a-zA-Z0-9@]){6,16}$/).test(this)},String.prototype.isPostCode=function(){return new RegExp(/^\d{6}?$/).test(this)}}(),function(e){e&&(e.openTag="<!--[",e.closeTag="]-->",e.helper("$absImg",function(e,t){return Tools.absImg(e,t)}),e.helper("$formatDate",function(e,t,n){return Tools.formatDate(e,t,n||"--")}),e.helper("$encodeUrl",function(e){return encodeURIComponent(e)}),e.helper("$formatCurrency",function(e,t,n){return Tools.formatCurrency(e,t,n)}),e.helper("$convertRN",function(e){return e?e.replace(/\r\n/gi,"<br/>"):"--"}),e.helper("$addClassByIdx",function(e,t,n){if(e==t)return n||""}),e.helper("$ellipsis",function(e,t){var n=e.replace(/[^\x00-\xff]/g,"__").length;return n/2>t?e.substring(0,t)+"...":e}),e.helper("$getDateFromStr",function(e){if(e&&0!=e.length){var t=e.length>10?10:e.length;return e.substring(0,t)}}),e.helper("$rbyFormatCurrency",function(e){return Tools.rbyFormatCurrency(e)}),e.helper("$addClassByCondition",function(e,t,n){return e?t||"":n||""}),e.helper("$getOrderStatus",function(e,t){return"detail"==t?config.ORDER_DETAIL_STATUS[e]||"--":"neworder"==t?config.NEW_ORDER_STATUS[e]||"--":config.ORDER_STATUS[e]||"--"}),e.helper("$getOrderFlowStatus",function(e){return config.ORDERFLOW_STATUS[e]||e}),e.helper("$getOrderFlowTel",function(e){var t=/\d{11}/,n=e.match(t);return n&&n.length>0?e.replace(t,'<a href="tel:'+n[0]+'">'+n[0]+"</a>"):e}),e.helper("$addClassForGoods",function(e,t,n){return!e||isNaN(e.limitNum)||isNaN(e.store)||isNaN(e.quantity)?"":(e.limitNum=parseInt(e.limitNum),e.store=parseInt(e.store),e.quantity=parseInt(e.quantity),1==e.isDeals?t||"":n||"")}),e.helper("$getCountDown",function(e,t,n,o){return"object"==typeof e?Tools.getRunTime(e.serverTime,e.endTime,e.isPre,e.showStyle):Tools.getRunTime(e,t,n,o)}),e.helper("$absWechatIcon",function(e){if(!e||0!=e.indexOf("http://"))return"../content/images/common/headicon.png";var t=e.split("/");return"0"==t[t.length-1]&&(t[t.length-1]="96"),t.join("/")}),e.helper("$getRudderPosition",function(e,t,n){var o;switch(e){case"6":o=config.pagePosition.fresh;break;case"2":o=config.pagePosition.food;break;case"3":o=config.pagePosition.muying;break;case"4":o=config.pagePosition.gehu;break;case"5":o=config.pagePosition.jiaju;break;case"draw":o=config.pagePosition.chou;break;case"actList":o=config.pagePosition.actList;break;default:o="00"}return o=NaN==n?o+"00"+t:o+Tools.checkTime(5*(config.page-1)+n+1)+t,o=location.href.indexOf("isappinstalled")==-1?"B"+o:"A"+o}),e.helper("$getQueryValue",function(e){return Tools.getQueryValue(e)}),e.helper("$isShuAppBrowser",function(){return Tools.isShuAppBrowser()}),e.helper("$replaceHost",function(e){if(!e||!config.REPLACE_HOST||2!=config.REPLACE_HOST.length||!Tools.isShuAppBrowser())return e;var t=new RegExp(config.REPLACE_HOST[0],"g");return e.replace(t,config.REPLACE_HOST[1])}))}(window.template),function(){function prevent(e){e.preventDefault()}function format(e,t){var n=e,o={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in o)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?o[i]:("00"+o[i]).substr((""+o[i]).length)));return t}var that=this,preventDefault,panel,panelBg,delay,count=0,toastPanel,temp,TipPanel=function(e,t){var n=this;n.panel=e||$("#fruitday-panel"),n.panelBg=panelBg||$("#fruitday-panel-bg"),n.dialogContent=n.panel.find(".dialog-content"),n.panelContent=n.panel.find(".panel-content"),n.panelTitle=n.panel.find(".panel-title"),n.panelTips=n.panel.find(".panel-tips"),n.panelButtons=n.panel.find(".panel-buttons"),n.btnOk=n.panel.find(".btn-primary"),n.btnCancel=n.panel.find(".btn-default"),n.panelText=n.panel.find(".panel-text"),n.panelTick=n.panel.find(".panel-tick"),n.panelInput=n.panel.find(".panel-input"),n.options={type:"error",tick:0,okText:"确定",cancelText:"取消",showTitle:!1,showTips:!1,textAline:"center"},n.panel.on("click",".btn-primary",function(e){n.hide(!0)}),n.panel.on("click",".btn-default",function(e){e.preventDefault(),n.hide()})};TipPanel.prototype={delay:void 0,count:0,setOptions:function(e){var t=this;for(i in e)t.options[i]=e[i];t.options.showTitle?t.panelTitle.show():t.panelTitle.hide(),t.options.showTips?t.panelTips.show():t.panelTips.hide(),t.options.panelInput?t.panelInput.show():t.panelInput.hide(),t.options.okText&&t.btnOk.text(t.options.okText),t.options.cancelText&&t.btnCancel.text(t.options.cancelText),t.options.tipsText&&t.panelTips.html(t.options.tipsText),t.options.titleText&&t.panelTitle.text(t.options.titleText),"confirm"==t.options.type?(t.btnOk.show(),t.btnCancel.show()):"prompt"==t.options.type?(t.btnOk.show(),t.btnCancel.show()):(t.btnOk.show(),t.btnCancel.hide()),t.options.className?t.panelText.addClass(t.options.className):t.panelText.removeClass(t.options.className),t.panelText.html(t.options.message),t.panel.show(),t.panelBg.show(),t.dialogContent.height()>$(window).height()?t.dialogContent.css({"margin-top":0,top:0}):t.dialogContent.css({"margin-top":-(t.dialogContent.height()/2),top:"50%"}),t.panelContent.css("max-height",$(window).height()-t.panelButtons.height()),t.options.tick>1e3?(t.panelTick.text(t.options.tick/1e3),t.delay=setInterval(function(){t.count<t.options.tick-1e3?(t.count=count+1e3,t.panelTick.text((t.options.tick-count)/1e3)):(t._end(),t.count=0,clearInterval(t.delay))},1e3)):t.options.tick<=1e3&&t.options.tick>0&&(t.delay=setTimeout(function(){t._end()},t.options.tick))},_end:function(){var e=this;e.panel.hide(),e.panelBg.hide(),"function"==typeof e.options.tipsCallback?(e.options.tipsCallback(),e.options.tipsCallback=void 0):"function"==typeof e.options.yesCallback&&(e.options.yesCallback(),e.options.yesCallback=void 0)},show:function(){},hide:function(e){var t=this;t.delay&&clearTimeout(t.delay),t.panel&&(t.panel.hide(),t.panelBg.hide(),e?"function"==typeof t.options.yesCallback&&t.options.yesCallback():"function"==typeof t.options.noCallback&&t.options.noCallback(),t.options.yesCallback=void 0,t.options.noCallback=void 0)},preventDefault:function(e){e.preventDefault()}};var Tools={absImg:function(e,t){if(!e)switch(t){case 1:return config.WHITE_IMG_URL;default:return t||config.DEF_IMG_URL}return"object"==typeof e&&e.length>0&&(e=e[0]),e&&0==e.indexOf("http://")?e:config.HOST_IMAGE+e},formatDate:function(e,t,n){if(0==e)return"--";var o=t||"yyyy-MM-dd hh:mm";if(isNaN(e)||null==e)return n||e;if("object"==typeof e){var i=dd.getFullYear(),r=dd.getMonth()+1,a=dd.getDate();r<10&&(r="0"+r);var s=i+"-"+r+"-"+a,l=s.match(/(\d+)/g),c=new Date(l[0],l[1]-1,l[2]);return format(c,o)}"string"==typeof e&&(e=1*e),e<9999999999&&(e=1e3*e);var c=new Date(parseInt(e));return format(c,o)},formatCurrency:function(e,t,n){if(!e)return t||"--";e+="";var o,i,r=e.indexOf(".");r>0?(o=e.substring(0,r),i=e.substring(r,e.length)):(o=e,i="");var a=o.toString().length%3,s="";return 1==a?s="00":2==a&&(s="0"),o=s+o,o=o.replace(/(\d{3})/g,"$1,"),o=o.substring(0,o.length-1),s.length>0&&(o=o.replace(s,"")),i&&(2==i.length?i+="0":1==i.length&&(i+="00"),i=i.substring(0,3)),o+i},strToDate:function(e){var t=e.split(" "),n=t[0].split("-"),o=parseInt(n[0],10),i=parseInt(n[1],10)-1,r=parseInt(n[2],10),a=t[1].split(":"),s=parseInt(a[0],10),l=parseInt(a[1],10)-1,c=parseInt(a[2],10),u=new Date(o,i,r,s,l,c);return u},getRunTime:function(e,t,n,o){if(!e||isNaN(e)||!t||isNaN(t))return"数据错误";var i=parseInt(t)-parseInt(e),r="",a="";switch(n){case 1:a="还有",r="开始";break;default:a="剩余",r="结束"}if(i<=0)return"已结束";var s=Math.floor(i/86400),l=Math.floor(i/3600)%24,c=Math.floor(i/60)%60,u=Math.floor(i)%60;return 0==o?a+" <span><em>"+Tools.checkTime(s)+"</em> 天 <em>"+Tools.checkTime(l)+"</em> : <em>"+Tools.checkTime(c)+"</em> : <em>"+Tools.checkTime(u)+"</em> </span> "+r:"<em>"+Tools.checkTime(s)+"</em>天<em>"+Tools.checkTime(l)+"</em>时<em>"+Tools.checkTime(c)+"</em>分<em>"+Tools.checkTime(u)+"</em>秒</span> "},checkTime:function(e){return e<10&&(e="0"+e),e},getQueryValue:function(e){var t=location.search,n=new Array;if(t.length>1){var o=t.indexOf("?");t=t.substring(o+1,t.length)}else t=null;if(t)for(var i=0;i<t.split("&").length;i++)n[i]=t.split("&")[i];for(var r=0;r<n.length;r++)if(n[r].split("=")[0]==e)return decodeURI(n[r].split("=")[1]);return""},getWindow:function(){return{width:window.innerWidth,height:window.innerHeight}},getNoScrollWin:function(){return{width:$(window).width(),height:$(window).height()}},getDocument:function(){var e=document.documentElement||document.body;return{width:e.clientWidth,height:e.clientHeight}},getScreen:function(){return{width:screen.width,height:screen.height}},showOrHideScrollBar:function(e){preventDefault=preventDefault||function(e){e.preventDefault()},(document.documentElement||document.body).style.overflow=e?"auto":"hidden",e?document.removeEventListener("touchmove",preventDefault,!1):document.addEventListener("touchmove",preventDefault,!1)},showDialog:function(){},showOverlay:function(){},showConfirm:function(e,t,n){var o={};"object"==typeof e?o=e:(o.message=e,o.yesCallback=t,o.noCallback=n),o.type="confirm",o.showTitle=!0,o.showTip=!1,o.titleText=o.titleText||"提示",o.className=o.className||"text-c",panel=panel||new TipPanel,panel.setOptions(o)},showAlert:function(e,t,n){var o={};"object"==typeof e?o=e:(o.message=e,o.tick=t,o.yesCallback=n),"boolean"!=typeof o.showTitle&&(o.showTitle=!1),o.type="alert",panel=panel||new TipPanel,panel.setOptions(o)},showPrompt:function(e,t,n,o,i){var r={};"object"==typeof e?r=e:(r.message=e,r.tick=o,r.okText=n||"确定",r.yesCallback=i),"boolean"!=typeof r.showTitle&&(r.showTitle=!1),r.showTitle=!0,r.panelInput=!0,r.showTip=!1,r.titleText=t||"提示",r.type="prompt",panel=panel||new TipPanel,panel.setOptions(r)},showLoading:function(){$("#fruitday-loading").show()},hideLoading:function(){$("#fruitday-loading").hide()},hidePanel:function(e){panel&&panel.hide(e)},showToast:function(e,t){toastPanel=toastPanel||$("#fruitday-toast"),t=t||4e3,delay&&clearTimeout(delay),e=e.replace(/！/g,"！<br/>"),e=e.replace(/！<br\/>$/,"！"),e=e.replace(/。/g,"。<br/>"),e=e.replace(/。<br\/>$/,"。"),toastPanel.find("span").html(e),toastPanel.show(),delay=setTimeout(function(){toastPanel.hide()},t)},isIPad:function(){return/iPad/gi.test(navigator.appVersion)},isIos:function(){return/iphone|iPad/gi.test(navigator.appVersion)},isAndroid:function(){return/android/gi.test(navigator.appVersion)},isWeChatBrowser:function(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)},isFruitdayAppBrowser:function(){var e=navigator.userAgent.toLowerCase();return"Fruitdayapp"==e.match(/Fruitdayapp/i)},formJson:function(e){var t={},n=$(e).serializeArray();return $.each(n,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},alert:function(e){Cookie.get("DevDebug")?alert(e):console.log(e)},_GET:function(){var e=location.search,t={};if(""===e||void 0===e)return t;e=e.substr(1).split("&");for(var n in e){var o=e[n].split("=");t[o[0]]=o[1]}return t.from&&delete t.code,t},removeParamFromUrl:function(e){var t=Tools._GET();for(var n in e)delete t[e[n]];return location.pathname+Tools.buildUrlParamString(t)},buildUrlParamString:function(e){var t="";for(var n in e)t+=n+"="+e[n]+"&";t=t.slice(0,t.length-1);var o=""===t||void 0===t;return o?"":"?"+t},FruitdayFormatCurrency:function(e){if(!e||isNaN(e))return e;var t=parseFloat(e),n=t.toFixed(2);return n.indexOf(".00")>=0&&(n=parseFloat(e).toFixed(0)),n},changeURLArg:function(url,arg,arg_val){var pattern=arg+"=([^&]*)",replaceText=arg+"="+arg_val;if(url.match(pattern)){var tmp="/("+arg+"=)([^&]*)/gi";return tmp=url.replace(eval(tmp),replaceText)}return url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText}};window.Tools=Tools}(),function(){var e={toHome:function(){Tools.isfruitdayAppBrowser()?Jiao.toHome(2):location.href="../index.html"},toGroup:function(){Tools.isfruitdayAppBrowser()?Jiao.toGroup():location.href="../group/activity.html"},toCheckout:function(e){var t={type:Tools._GET().type,targetId:Tools._GET().targetId,groupId:Tools._GET().groupId,addressId:e},n=[];for(var o in t)t[o]&&n.push(o+"="+t[o]);location.href="../shopping/commit.html?"+n.join("&")},toCategory:function(){Tools.isfruitdayAppBrowser()?Jiao.toCategory():location.href="../category/goods.html"},toBack:function(){history.back()}};window.Go=e}(),function(){var e={};e.getId=function(){var e=Cookie.get(Storage.AUTH);return e},e.isFromApp=function(){return"app"==Tools._GET().source},e.login=function(){var t=config.APPID,n=Tools.getQueryValue("code"),o=$("#login-form");if(Tools.isfruitdayAppBrowser())return Jiao.noticeIsLogout(),void(e.resetBtn&&e.resetBtn());if(!Tools.isWeChatBrowser()&&!Tools.isfruitdayAppBrowser()&&o.length>0)return $("#fruitday-cover-bg").show(),o.show(),showAccount(),void $(".btn-add-cart").removeClass("disabled").text("我要开团");if(!Tools.isWeChatBrowser()&&!Tools.isfruitdayAppBrowser())return Tools.alert("测试"),Cookie.set("UserSN",100,0),Cookie.set("sp_login_return_url",Tools.removeParamFromUrl(["code"]),0),e.isLogining=!0,void(location.href="/login");if(!e.isLogining){if(e.isLogining=!0,Tools.alert("code: "+n),void 0!==n&&""!=n)return Cookie.set("UserSN",100,0),Cookie.set("sp_login_return_url",Tools.removeParamFromUrl(["code"]),0),e.isLogining=!0,void(location.href="/login");var i=location.origin+Tools.removeParamFromUrl(["from","code","share_id","isappinstalled","state","m","c","a"]),r=config.OAUTHURL;r=r.replace("APPID",t).replace("REDIRECT_URI",encodeURIComponent(i)).replace("SCOPE","snsapi_userinfo"),location.href=r}},e.checkLoginStatus=function(t){e.init=t;Cookie.get("UserSN");Tools.alert("非微信浏览器"),t&&t()},e.loginForApp=function(t){Cookie.set("UserSN",t),"function"==typeof e.init&&e.init()};var t=!1;e.initCountDown=function(e,n){if(!t){t=!0;var o=0,e=parseInt(e);setInterval(function(){$(n).each(function(t,n){var i=$(this).attr("data-end");$(this).text(Tools.getRunTime(e+o,i))}),o++},1e3)}},e.lazyload=function(e){function t(){$(e).each(function(e,t){if(!$(this).hasClass("loaded")&&""!=$(this).attr("data-src")){var t=$(this).offset(),i=$(this).height()+8;t.top+i>=o&&t.top<o+5*n&&$(this).attr("src",$(this).attr("data-src")).addClass("loaded")}})}var n=($(document).height(),$(window).height()),o=0;$(window).scroll(function(){o=$(window).scrollTop(),t()}),setTimeout(t,200)},$(document).on("click",".nextpage",function(t){$(this).hasClass("disabled")||(config.PAGE++,e.getList&&e.getList())}),$(window).scroll(function(){if(0!=$(".nextpage").length&&!$(".nextpage").hasClass("disabled")){var t=$(window).scrollTop(),n=$(window).height(),o=$(".nextpage").offset();o.top<t+3*n/2&&(config.PAGE++,e.getList&&e.getList())}}),document.getElementById("fruitday-cover-bg")&&document.getElementById("fruitday-cover-bg").addEventListener("touchmove",function(e){e.preventDefault()},!0),$(".back-top").click(function(e){e.preventDefault(),window.scrollTo(0,0)}),e.abcLogin=function(e,t){var n=Storage.get("ACCOUNT");n&&(e=n.phone,t=n.password),Ajax.custom({url:config.HOST_API+"test?service=user.signin",data:{mobile:e||"15639270772",password:t||"123456"}},function(e){},function(e,t){Storage.set("connect_id",t.connect_id)})},"FastClick"in window&&FastClick.attach(document.body),window.common=e}();